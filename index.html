<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery.js"></script>
    <title>Health App</title>
</head>
<body>

    <h1>Health App</h1>

    <form>
        <h2>Member:</h2>
        First Name: <br>
        <input type="text" id="firstname" name="firstname" placeholder="First Name"><br>
        Last name:<br>
        <input type="text" id="lastname" name="lastname" placeholder="Last Name"><br>
    
        <h3>Run Information:</h3>
        Run Date: Format <br>
        <input type="date" id="date" name="date"><br>
        Total Miles:<br>
        <input type="number" id="miles" name="miles" placeholder="Miles"><br>
        Total Minutes:<br>
        <input type="number" id="minutes" name="minutes" placeholder="Minutes"><br>
       
        <h3>Nutrition Information:</h3>
        Total calories today:<br>
        <input type="number" id="calories" name="calories" placeholder="calories"><br>
    
        <input id="submit" type="submit"><br>
    
    </form>

    <hr>

    <div>
        <button>Average Calories</button>

        <button>Fastest Run</button>
        <button>Fastest 5 Runs</button>

        <button>Slowest Run</button>
        <button>Slowest 5 Runs</button>
    </div>
    
    <script type="text/javascript">
    
    // var mysql = require("mysql");
// var connection = require("./connection");

    $("#submit").on("click", function(event) {
        event.preventDefault();

        console.log("hello");

        var entriesForUser;

        var newEntry = {
            firstName: $("#firstname").val().trim(),
            lastName: $("#lastname").val().trim(),
            date: $("#date").val().trim(),
            miles: $("#miles").val().trim(),
            minutes: $("#minutes").val().trim(),
            calories: $("#calories").val().trim()
        };

        // console.log(newEntry);

        $.post("/api", newEntry,
        function(data) {
            console.log(data);

        $("#firstname").val("");
        $("#lastname").val("");
        $("#date").val("");
        $("#miles").val("");
        $("#minutes").val("");
        $("#calories").val("");

        })

    });
    var currentURL = window.location.origin;

    function runQuery() {

    $.ajax({ url: currentURL + "/api", method: "GET" })
      .then(function(entries) { 

        console.log("URL: " + currentURL + "/api");
        console.log(entries);

      }
    );
    }

    runQuery();

    </script>

</body>
</html>